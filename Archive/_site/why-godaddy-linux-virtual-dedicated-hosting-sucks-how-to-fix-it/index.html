<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Why GoDaddy Linux Virtual Dedicated Hosting Sucks &#038; How to Fix It</title>
  <meta name="description" content=" Ok, put the guns away. Linux rocks… My beef is with GoDaddy and how they are hurting the average Linux virtual dedicated server user.">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://www.colinmcnamara.com/why-godaddy-linux-virtual-dedicated-hosting-sucks-how-to-fix-it/">
  <link rel="alternate" type="application/rss+xml" title="DevOps Deciple in an Enterprise World" href="http://www.colinmcnamara.com/feed.xml" />
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">DevOps Deciple in an Enterprise World</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        
          
          <a class="page-link" href="/about/">About Colin McNamara</a>
          
        
          
        
          
        
          
        
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="post">

  <header class="post-header">
    <h1 class="post-title">Why GoDaddy Linux Virtual Dedicated Hosting Sucks &#038; How to Fix It</h1>
    <p class="post-meta">Feb 3, 2008 • colinmcnamara</p>
  </header>

  <article class="post-content">
    <p><strong><span style="font-size: 12pt"><span style="font-size: 12pt"> Ok, put the guns away. Linux rocks… My beef is with GoDaddy and how they are hurting the average Linux virtual dedicated server user.</span></span></strong></p>

<p>GoDaddy, one of the nations largest registrars and hosting providers is distributing bloated and possibly insecure code that will cause the average user to more then double their hosting costs. In the pages below you will learn exactly what GoDaddy is doing to your server, how their support staff will try to upsell you, and the steps you need to take to ensure proper operation of your Virtual Dedicated Server.</p>

<p><span style="font-size: 14pt">Background</span></p>

<p>One of my new years resolutions this year was to consolidate hosting accounts into one virtual server (hosted). I had my domains, and my old hosting with Godaddy already so it was a no brainer to try out one of GoDaddys VDS (Virtual Dedicated Servers).</p>

<p>I went with their 29.99 a month package, with Centos5, unlimited domains, 10Gb disk, and 256 MB of memory. This should be perfectly fine for hosting a couple MySql driven sites, and a couple gallery instances. Let me emphasise this is only handling 4 active domains, two of which only have static HTML.</p>

<p>Provisioning was a breeze, from order to shell account only took 4 hours. I was provided with shell access, pre-configured yum repositories, and this web control panel – simple control panel, or TurboPanel (seems to have two different names). I was able to pop into GoDaddy’s control panel interface with a direct link from their server manager console, and was setting up domains in no time. (Let me throw this caveat out though, don’t buy this product for your mom’s hosting…. the documentation is horrible, and by horrible I mean non-existant).</p>

<p>So I get my server all set up a couple weeks ago, transfer all my files from <a href="http://www.2cups.com">2 Cups Solutions</a> and set up my new <a href="http://www.colinmcnamara.com">www.colinmcnamara.com</a> site. Things go just fine, I changed over to wordpress as a CMS and am totally thrilled. My applications and email are working perfectly. Plus, I have a shell account at GoDaddy which is a very handy thing to have as a network engineer. Things are going so well, that I give my buddy Rick a Christmas present and get <a href="http://www.ricksdavis.com">ricksdavis.com</a> and <a href="http://www.el-cinco.net" target="_blank">el-cinco.net</a> for him, and host it on my GoDaddy VDS.I go ahead and purchase the domain through godaddy’s domain manager. This is obviously GoDaddy’s core competency, and goes flawlessly as usual. Next step, I go into the Turbo Panel web interface. Let me give you a little background on TurboPanel. This is the “free” equivalent “to plesk or cpanel. It is actually ok for automating your domain provisioning, though if you are a normal skill level user, I would recommend paying the extra 9.99 a month for Cpanel.</p>

<p><span style="font-size: 14pt">Server Error</span></p>

<p>I open up my TurboPanel interface and go to provision ricksdavis.com into the domain manager. It comes back with the least descriptive error I have ever received.</p>

<p><strong>Server Error<br />
We are sorry, the system has encountered an error while processing your request.</strong></p>

<p><strong>Home</strong></p>

<p><strong>If you continue to receive this error, please contact your system administrator.</strong></p>

<p><strong>Your URL: /domain/edit.do</strong></p>

<p><strong>Error details:</strong></p>

<p>**CommandFailedException: Unable to get min/max uids<br />
at c.g.t.f.systems.user.LinuxUserSubsystem.loadUids:825<br />
at c.g.t.f.systems.user.LinuxUserSubsystem.getMinUid:780<br />
at c.g.t.f.systems.user.LinuxUserSubsystem.loadUserInfo:670<br />
at c.g.t.f.systems.user.LinuxUserSubsystem.getUserInfo:646<br />
at c.g.t.w.actions.domain.ActionDomainEdit.process:84<br />
at c.g.t.w.actions.AbstractSpringAction.execute:118<br />
…<br />
at c.g.t.w.filters.AuthorizedResourceFilter.doFilter:38<br />
…<br />
at c.g.t.w.filters.RequestPopulationFilter.doFilter:117<br />
…<br />
**</p>

<hr />

<p>This is the most descriptive error ever right? it tells you what is wrong, has a link to the support system, and gives you actionable information…. I would say a resounding NO. This is a classic example of why friends don’t let friends program in Java. When I got this error last night, I was scratching my head. As an engineer, the first thing I will look at is the last change to the system. Coincidentally I had installed awstats two nights before, and looking at my change logs, I saw that I had upgraded my perl version. So, with no fast response to the support email from GoDaddy I chose to put in a server re provision request (fully automated) and restore from my backups. That process took about an hour, but afterwards I was back online with no errors. Eureka! I found it (I thought). I provisioned Rick’s domain, wordpress, gallery2 etc and then went to bed.</p>

<p><span style="font-size: 14pt">GoDaddy Support Response </span></p>

<p>Fast forward to this morning, and I finally recieve an email reply from godaddy support. The email is pasted below-</p>

<p>(I have replaced the agents name with John Doe. Tech support is a hard job and I see no reason to highlight him specifically)</p>

<table border="0" cellspacing="1" cellpadding="2" width="100%">
  <tr>
    <td bgcolor="#99cc99">
      <strong>Support Staff Response</strong>
    </td>
  </tr>
  
  <tr>
    <td>
      Dear Sir or Madam,Thank you for contacting Server Support.Your system may not have the resources needed to accommodate the processes running when you observed this issue. To resolve this issue, you can attempt to restart Java and Simple Control Panel with the following commands through SSH as root;/etc/init.d/tomcat55 restart<br /> /etc/init.d/turbopanel restartIt may be necessary to remove unneeded processes, stop unused processes, or limit the currently running processes to not over utilize the server&#8217;s resources. To remedy this issue long-term, you could either setup a server with 512mb RAM, or upgrade to a Dedicated server.In order to properly support this issue we will need to reveal account specific information. Before we can give out any information on the account, we will need to verify the last 4 digits of a credit card, PayPal Billing Agreement/Account Number, or Support PIN on the account. Payment information on the account can be found under &#8220;Credit Card &amp; Payment Info&#8221; from the &#8220;Customer Info &amp; More&#8221; dropdown. We appreciate your understanding in this matter.Please contact us if you have any further issues,John Doe<br /> Server Support<br /> Hosting Operations
    </td>
  </tr>
</table>

<p>Before re-provisioning the server, I went ahead and tried the old three finger salute (reboot) the error still existed. So even if this email would have came to me on time, it would not have helped.</p>

<p>But that is besides the point. lets dig into the solution</p>

<p>The agent suggested the following fix –</p>

<p>Restart tomcat – which I was NOT using for any of my web applications (not an ejb guy)</p>

<p>/etc/init.d/tomcat55 restart</p>

<p>Restart TurboPanel (or simple control panel now – they haven’t updated their init scripts)</p>

<p>/etc/init.d/turbopanel restart</p>

<p><span style="font-size: 14pt">GoDaddy tried to upsell me, instead of fixing their code</span></p>

<p>He gives the standard, run less stuff on your server speech (remember, I only have 4 domains on this server)</p>

<p>Now here is the kicker – <strong>To remedy this issue long-term, you could either setup a server with 512mb RAM, or upgrade to a Dedicated server.</strong></p>

<p>What the heck is with that? I should not need an upgrade with only 4 domains on a server. Especially when in the setup the default Cpanel implies support of 30 domains. Is this Tech Support or a Sales Call?</p>

<p>But, since my server was working fine I don’t pay much attention to the email and move on with my life.</p>

<p>Fast forward an hour, and I am show Rick how to access all the features of his new site, and I figure that I need to change an email account on his domain to forward to his old account. Fine, this should take two minutes. I log onto the TurboPanel interface to put the email forward in.. and there it, a big useless error screen. What the heck is with that?</p>

<p>So this time I actually read the email, and try the fix. Results = nothing. GoDaddy offers shell access so I log in, run top and filter for %memory used. Low and behold, there is only 8142 bytes of memory free, and a Java process owned by root is using 300Mb of virtual memory, and 132Mb of real memory, and Tomcat is using 115Mb of virtual memory and 86Mb of real memory.</p>

<p>Let me translate this into English – <strong>Godaddy’s control panel application was using 218 Megabytes of the 256 Megabytes of memory I had purchased. That left me with 34 Megabytes of memory</strong> . Let me clarify this, I had paid for a virtual server with 256Mb of ram, up to 1000Mb bursted (which I think is their code for swap). I am only running 4 domains on this server, and two pop3 email servers. This should not be a problem.So what is the cause of the problem? I can sum it up, crappy Java programming. Someone decided to write this program in Java (probably easier to outsource) instead of optimising it to run on lean systems. Their code effectively takes up all the available memory. And on top of that, they are are running a webserver process as root… yes as root. It is like asking for your server to get hacked.</p>

<p><span style="font-size: 18pt"><strong>Now, that I am done ranting, let me highlight how to fix this problem.</strong></span></p>

<p><span style="font-size: 14pt">If you are on Windows use the following procedure to get shell access to your GoDaddy VDS –<br /> </span></p>

<ul>
  <li>you will want to download a ssh client called putty – <a title="putty download" href="http://the.earth.li/~sgtatham/putty/latest/x86/putty.exe" target="_blank">Download Here</a></li>
  <li>Copy this file to your desktop, double click putty.exe , and you should see something like this –</li>
</ul>

<p>[singlepic id=73 w=320 h=240 float=]</p>

<ul>
  <li>In the host name field I have www.<em>yourdomain</em>.com . replace <em>yourdomain</em> with your domain name.</li>
  <li>Click on the open button on the bottom right, and a shell should pop up, along with a warning that looks like this (you can click OK to the warning)</li>
</ul>

<p>[singlepic id=74 w=320 h=240 float=]</p>

<ul>
  <li>Now skip past the linux section</li>
</ul>

<p><span style="font-size: 14pt">If you are running Linux or Unix start here –</span></p>

<ul>
  <li>Open up a command line terminal</li>
  <li>ssh using your godaddy simple control panel username example –</li>
</ul>

<p>ssh your-godaddy-control-panel-username@www.yourdomain.com</p>

<ul>
  <li>If this is your first time connecting to this server, you will be prompted to accept an unkown ssh key into known_hosts, choose yes to accept</li>
</ul>

<p><span style="font-size: 14pt">Both Windows, Linux and Unix Continue Here – </span></p>

<ul>
  <li>Enter your the password you use to access your GoDaddy Simple Control Panel Interface</li>
  <li>You will be presented with what looks like a DOS window, this is called a secure shell terminal. Type in the username you use to access your Godaddy Simple Control Panel and then hit enter</li>
</ul>

<p>[singlepic id=76 w=320 h=240 float=]</p>

<ul>
  <li>Now type in the password that you use to access your Simple Control Panel Interface and hit enter</li>
</ul>

<p>[singlepic id=75 w=320 h=240 float=]</p>

<ul>
  <li>Congratulations, if you see the window below you are now shelled into your virtual dedicated server.</li>
</ul>

<p>[singlepic id=72 w=320 h=240 float=]</p>

<p><span style="font-size: 14pt">Change to the Root user</span></p>

<ul>
  <li>Now that you are shelled into a Linux device you need to escalate your privileges to get administrator level access. In the Unix world this user is known as Root. You can change to this user, and get full system privileges by using the following command.</li>
</ul>

<p>su – root</p>

<ul>
  <li>You will be presented with a password prompt, enter in the same password that you have used to log into your Simple Control Panel Interface</li>
  <li>You are now root, be careful with what command you enter under this user, as you can do some damage if you are careless</li>
</ul>

<p><span style="font-size: 14pt">Clean out your servers memory</span></p>

<ul>
  <li>Most recent Redhat direvatives (including Centos) utilize a tool called yum to add and remove packages. This is also true with your linux servers at GoDaddy.</li>
  <li>you need to install a tool called memhog, it is part of a package called numactl that is normally used to assign specific process’s to specific cpu’s in a multi-core system. We will be using it today to fix GoDaddy’s memory hogging application</li>
</ul>

<p>yum install numactl</p>

<ul>
  <li>choose yes to all the prompts, and numactl will automatically be downloaded and installed on your server</li>
</ul>

<p><span style="font-size: 14pt">Stop GoDaddy Simple Control Panel, and Tomcat, and tell them not to start automatically when your server restarts. </span></p>

<ul>
  <li>Tomcat is a special type of webserver for Java based applications. Godaddy uses it to run their control panel interface. 99.99999 percent of users will not need to use Tomcat. If you do need to use Tomcat then you are a technical user and will know what to do.</li>
  <li>In Linux, server applications are called daemons. The are executed by init scripts. We will use these scripts to turn off these server applications</li>
  <li>Turn off the TurboPanel daemon ( this is the process that runs your simple control panel web interface</li>
</ul>

<p>/etc/init.d/turbopanel stop</p>

<ul>
  <li>Next we need to turn off Tomcat</li>
</ul>

<p>/etc/init.d/tomcat55 stop</p>

<ul>
  <li>Now that we have these services turned off, we need to make sure that they don’t come back when we reboot the server. We can do this by using the chkconfig command.</li>
  <li>Stop the Simple Control Panel Interface from starting automatically by executing the following command</li>
</ul>

<p>chkconfig turbopanel off</p>

<ul>
  <li>Stop the Tomcat server from starting automatically by executing the following command</li>
</ul>

<p>chkconfig tomcat55 off</p>

<p><span style="font-size: 14pt">Clean the mess GoDaddy made of your servers memory</span></p>

<ul>
  <li>A couple steps back we installed numactl. The executable we wanted out of this package is memhog. Issue the following command to take your memory back. This command will overwrite 200 megabytes of your memory, allowing the rest of your applications to get access to that memory.</li>
</ul>

<p>memhog 200m</p>

<ul>
  <li>This will Clear out the memory that GoDaddy’s application took over, and allow the rest of your daemons to run fine.</li>
</ul>

<p><span style="font-size: 14pt">Great, my server is running better now. But I want to use my Simple Control Panel Interface. How do I do that?</span></p>

<ul>
  <li>Easy, all you need to do is temporarily start the turbopanel daemon. When you are done making changes, you can turn it off again</li>
</ul>

<p>/etc/init.d/tomcat55 start</p>

<p>/etc/init.d/turbopanel start</p>

<ul>
  <li>When you are done, don’t forget to turn it off</li>
</ul>

<p>/etc/init.d/turbopanel stop</p>

<p>/etc/init.d/tomcat55 stop</p>

<p><span style="font-size: x-large;"><strong><em>** UPDATE **</em> </strong></span><span style="font-size: x-large;"><strong><em>** UPDATE **</em></strong></span></p>

<p>I managed to stay with Godaddy and use their Virtual Dedicated Servers for 12 months. However I have moved to a new hosting provider (<a title="rimuhosting " href="http://rimuhosting.com/?r=6053414aa51e6c7a2d97931a7cf85e88" target="_blank">rimuhosting)</a> in the spring of 2009. My last straw with GoDaddy occurred when I noticed that even with my memory utilization under control my applications were performing poorly. I shelled into verify and found that the virtual disk I/O was severly limited.</p>

<p><span style="font-size: large;"><strong>Performance issues – </strong></span></p>

<p>Simple command to determine directory size on GoDaddy VPS</p>

<p>[root@ip-72-167-15-128 home]# time du -hs<br />
1.3G    .<br />
real    0m49.013s<br />
user    0m0.011s<br />
sys    0m0.062s</p>

<p>Simple command to determine directory size on Rimuhosting VPS<br />
[root@colinmcnamara home]# time du -hs<br />
1.3G    .<br />
real    0m0.343s<br />
user    0m0.050s<br />
sys    0m0.290s</p>

<p><span style="font-size: medium;"><strong>Translated into english, it took 49 seconds to execute a simple command on my GoDaddy server, and it too 0.34 seconds (under 1 second) to execute the same command on my virtual server at <a href="http://rimuhosting.com/?r=6053414aa51e6c7a2d97931a7cf85e88" target="_blank">Rimuhosting</a>.</strong></span></p>

<p>On top of that, I was paying $32 dollars a month to GoDaddy for a server with 256 megs of ram as well as a FTP backup account. When I created my short list of hosts, I noticed that I was not getting the best deal by staying with GoDaddy.</p>

<p><span style="font-size: medium;"><strong>Pricing at <a href="http://rimuhosting.com/?r=6053414aa51e6c7a2d97931a7cf85e88" target="_blank">Rimuhosting</a></strong></span></p>

<ul>
  <li><a title="Rimuhosting VDS" href="http://rimuhosting.com/vps-servers?r=6053414aa51e6c7a2d97931a7cf85e88" target="_blank">Virtual Dedicated Server 190 Megabytes RAM – $19.95</a></li>
  <li><a title="Rimuhosting VDS" href="http://rimuhosting.com/vps-servers?r=6053414aa51e6c7a2d97931a7cf85e88" target="_blank">Virtual Dedicated Server 400 Megabytes RAM – $29.95</a></li>
  <li><a title="Rimuhosting VDS" href="http://rimuhosting.com/vps-servers?r=6053414aa51e6c7a2d97931a7cf85e88" target="_blank">Virtual Dedicated Server 900 Megabytes RAM – $39.95</a></li>
  <li><a title="Rimuhosting VDS" href="http://rimuhosting.com/vps-servers?r=6053414aa51e6c7a2d97931a7cf85e88" target="_blank">Virtual Dedicated Server 1150+ Megabytes RAM – $49.95</a></li>
</ul>

<p><span style="font-size: small;">One thing you may notice, is that for the same price as the base GoDaddy VDS ($29.95) you get 400 Megabytes of RAM instead of 256. (and they won’t put on a memory sucking turbopanel app) On top of that, things that I had to pay extra for at GoDaddy such as backup space, backup mail relays, and DNS service came bundled for free. </span></p>

<p><span style="font-size: small;">I made the choice to move to Rimuhosting, and the service has been superior to GoDaddy in every single way. If you get sick of GoDaddy like I did, <a title="Rimuhosting" href="http://rimuhosting.com/?r=6053414aa51e6c7a2d97931a7cf85e88" target="_blank">you might want to check Rimuhosting out,</a> I think you’ll like them.</span></p>


  </article>

</div>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">DevOps Deciple in an Enterprise World</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col  footer-col-1">
        <ul class="contact-list">
          <li>DevOps Deciple in an Enterprise World</li>
          <li><a href="mailto:colin@2cups.com">colin@2cups.com</a></li>
        </ul>
      </div>

      <div class="footer-col  footer-col-2">
        <ul class="social-media-list">
          

          
          <li>
            <a href="https://twitter.com/colinmcnamara">
              <span class="icon  icon--twitter">
                <svg viewBox="0 0 16 16">
                  <path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809
                  c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/>
                </svg>
              </span>

              <span class="username">colinmcnamara</span>
            </a>
          </li>
          
        </ul>
      </div>

      <div class="footer-col  footer-col-3">
        <p class="text">CCIE #18233, DevOps, OpenStack, Containers, SDN, People, Process, Technology
</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
